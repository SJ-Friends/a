<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>문장 생성기</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 2rem;
      background: #f4f4f4;
    }
    .section {
      margin-bottom: 1.5rem;
    }
    label {
      display: block;
      margin-bottom: 0.5rem;
    }
    input {
      width: 300px;
      padding: 0.5rem;
      margin-right: 0.5rem;
    }
    button {
      padding: 0.5rem 1rem;
      margin-right: 0.5rem;
      cursor: pointer;
    }
    textarea {
      width: 100%;
      height: 150px;
      padding: 1rem;
      font-size: 1rem;
    }
  </style>
</head>
<body>
  <h1>문장 생성기</h1>

  <div class="section">
    <label>업체명</label>
    <input type="text" id="titleInput" />
    <button onclick="addToSentence('title')">추가</button>
    <button onclick="removeFromSentence('title')">제거</button>
  </div>

  <div class="section">
    <label>위치</label>
    <input type="text" id="locaInput" />
    <button onclick="addToSentence('loca')">추가</button>
    <button onclick="removeFromSentence('loca')">제거</button>
  </div>

  <div class="section">
    <label>키워드</label>
    <input type="text" id="kwordInput" />
    <button onclick="addToSentence('kword')">추가</button>
    <button onclick="removeFromSentence('kword')">제거</button>
  </div>

  <div class="section">
    <label>주문 메뉴</label>
    <input type="text" id="orderInput" />
    <button onclick="addToSentence('order')">추가</button>
    <button onclick="removeFromSentence('order')">제거</button>
  </div>

  <div class="section">
    <label>직접 입력</label>
    <input type="text" id="customSentence" />
    <button onclick="addCustomToSentence()">추가</button>
    <button onclick="removeCustomFromSentence()">제거</button>
  </div>

  <div class="section">
    <label>생성된 문장</label>
    <textarea id="finalSentence" readonly></textarea><br/>
    <button onclick="copySentence()">복사</button>
    <button onclick="clearSentence()">초기화</button>
  </div>

  <script>
    function sanitizeSentence(text) {
      return text.replace(/\n/g, '').trim();
    }

    function updateSentence(content) {
      const sentenceArea = document.getElementById("finalSentence");
      let current = sanitizeSentence(sentenceArea.value);
      sentenceArea.value = (current + content).trim() + '\n';
    }

    function addToSentence(type) {
      let value = "";
      if (type === "loca") value = document.getElementById("locaInput").value.trim();
      if (type === "title") value = document.getElementById("titleInput").value.trim();
      if (type === "kword") value = document.getElementById("kwordInput").value.trim();
      if (type === "order") value = document.getElementById("orderInput").value.trim();
      if (!value) return;

      let content = "";
      if (type === "order") content = `주문한 메뉴 : ${value}`;
      else if (type === "loca") content = `위치는 ${value}`;
      else if (type === "title") content = `업체명은 ${value}`;
      else if (type === "kword") content = `키워드는 ${value}`;

      updateSentence(content);
    }

    function removeFromSentence(type) {
      const sentenceArea = document.getElementById("finalSentence");
      let current = sanitizeSentence(sentenceArea.value);

      let target = "";
      if (type === "order") target = "주문한 메뉴 :";
      else if (type === "loca") target = "위치는";
      else if (type === "title") target = "업체명은";
      else if (type === "kword") target = "키워드는";

      if (target) {
        current = current.replace(new RegExp(target + ".*?(?=업체명은|위치는|키워드는|주문한 메뉴 :|$)"), '');
        sentenceArea.value = current.trim() + '\n';
      }
    }

    function addCustomToSentence() {
      const value = document.getElementById("customSentence").value.trim();
      if (value) updateSentence(value);
    }

    function removeCustomFromSentence() {
      const value = document.getElementById("customSentence").value.trim();
      const sentenceArea = document.getElementById("finalSentence");
      let current = sanitizeSentence(sentenceArea.value);
      sentenceArea.value = current.replace(value, '').trim() + '\n';
    }

    function clearSentence() {
      document.getElementById("finalSentence").value = '';
    }

    function copySentence() {
      const sentence = document.getElementById("finalSentence");
      sentence.select();
      document.execCommand("copy");
      alert("문장이 복사되었습니다.");
    }
  </script>
</body>
</html>
