<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>REST í˜ì¼ë°± ì˜ˆì œ2</title>
  <script src="https://openapi.map.naver.com/openapi/v3/maps.js?clientId=3t661n7ihz"></script>
  <style>html,body,#map{margin:0;padding:0;height:100%}</style>
</head>
<body>
  <div id="map"></div>
<script>
  // (1) ì§€ë„ ì´ˆê¸°í™”
  const map = new naver.maps.Map('map', {
    center: new naver.maps.LatLng(35.159667, 129.059384),
    zoom: 15
  });

  // (2) REST ì§€ì˜¤ì½”ë”© URL êµ¬ì„±
  const url = new URL(
    'https://naveropenapi.apigw.ntruss.com/map-geocode/v2/geocode'
  );
  url.searchParams.append('query', 'ì •ì„±ìˆœëŒ€ ì—°ì‚°ë™');

  console.log('ğŸš€ ìš”ì²­ URL:', url.href);

  // (3) fetch í˜¸ì¶œ
  fetch(url.href, {
    headers: {
      'X-NCP-APIGW-API-KEY-ID': '3t661n7ihz',
      'X-NCP-APIGW-API-KEY':    'fKanOw28u03oC4Q7xlGamZCtwAzjUtm5k9YniH8x'
    }
  })
  .then(res => {
    console.log('ğŸ“¥ ì‘ë‹µ ìƒíƒœ:', res.status, res.statusText);
    if (!res.ok) {
      return res.text().then(body => {
        throw new Error(`HTTP ${res.status} â€“ ${body}`);
      });
    }
    return res.json();
  })
  .then(json => {
    console.log('âœ… ì§€ì˜¤ì½”ë”© ê²°ê³¼:', json);
    const addr = json.addresses[0];
    const coord = new naver.maps.LatLng(addr.y, addr.x);
    map.setCenter(coord);
    new naver.maps.Marker({ position: coord, map: map });
  })
  .catch(err => {
    console.error('âŒ REST ì§€ì˜¤ì½”ë”© ì—ëŸ¬:', err);
    alert(`ì§€ì˜¤ì½”ë”© ìš”ì²­ ì˜¤ë¥˜: ${err.message}`);
  });
</script>

</body>
</html>
