<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>REST 페일백 예제4</title>
  <script src="https://openapi.map.naver.com/openapi/v3/maps.js?clientId=3t661n7ihz"></script>
  <style>html,body,#map{margin:0;padding:0;height:100%}</style>
</head>
<body>
  <div id="map"></div>
  <script>
    // 지도 생성
    const map = new naver.maps.Map('map', {
      center: new naver.maps.LatLng(35.159667, 129.059384),
      zoom: 15
    });

    // 절대 URL 로 REST 지오코딩
    const query = encodeURIComponent('정성순대 연산동');
    const url   = 'https://naveropenapi.apigw.ntruss.com/map-geocode/v2/geocode'
                + '?query=' + query;

    fetch(url, {
      method: 'GET',
      headers: {
        'X-NCP-APIGW-API-KEY-ID': '3t661n7ihz',
        'X-NCP-APIGW-API-KEY':    'fKanOw28u03oC4Q7xlGamZCtwAzjUtm5k9YniH8x'
      }
    })
    .then(res => {
      if (!res.ok) throw new Error(`HTTP ${res.status}`);
      return res.json();
    })
    .then(json => {
      const addr  = json.addresses[0];
      const coord = new naver.maps.LatLng(addr.y, addr.x);
      map.setCenter(coord);
      new naver.maps.Marker({ position: coord, map });
    })
    .catch(err => {
      console.error('REST 지오코딩 오류:', err);
    });
  </script>
</body>
</html>
